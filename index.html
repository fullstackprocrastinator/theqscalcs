<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The QS Calcs - Quantity Surveying Calculators | Construction Calculators</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="creator-note">
            Created by <a href="https://www.linkedin.com/in/bengoulding" target="_blank" rel="noopener">Ben</a><br>
            <a href="https://buymeacoffee.com/bengouldins" target="_blank" rel="noopener">Buy me a coffee?</a>
        </div>
        <div class="header-content">
            <h1 id="page-title">The Quantity Surveying Calculators</h1>
            <p><a href="https://www.theqsdictionary.com/" target="_blank">&#128214; Click here for The QS Dictionary &#128214;</a></p>
        </div>
        <script data-goatcounter="https://191186.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
    </header>
    <main class="container">
        <div class="calculators-grid">
            <!-- Stair Design Calculator -->
            <div class="calculator">
                <h2>Stair Design Calculator</h2>
                <div class="input-group">
                    <label for="totalHeight">Total Height (mm)</label>
                    <input type="number" id="totalHeight">
                </div>
                <div class="input-group">
                    <label for="riserHeight">Desired Riser Height (mm)</label>
                    <input type="number" id="riserHeight" value="175">
                </div>
                <button class="btn" onclick="calculateStairs()">Calculate</button>
                <div class="result" id="stairResult"></div>
            </div>

            <!-- Structural Load Calculator -->
            <div class="calculator">
                <h2>Structural Load Calculator</h2>
                <div class="input-group">
                    <label for="floorArea">Floor Area (m²)</label>
                    <input type="number" id="floorArea">
                </div>
                <div class="input-group">
                    <label for="loadPerSqm">Load per m² (kN/m²)</label>
                    <input type="number" id="loadPerSqm" value="2.5">
                </div>
                <button class="btn" onclick="calculateLoad()">Calculate</button>
                <div class="result" id="loadResult"></div>
            </div>

            <!-- Brick Estimator -->
            <div class="calculator">
                <h2>Brick Estimator</h2>
                <div class="input-group">
                    <label for="wallLength">Wall Length (m)</label>
                    <input type="number" id="wallLength">
                </div>
                <div class="input-group">
                    <label for="wallHeight">Wall Height (m)</label>
                    <input type="number" id="wallHeight">
                </div>
                <button class="btn" onclick="calculateBricks()">Calculate</button>
                <div class="result" id="brickResult"></div>
            </div>

            <!-- Paint Calculator -->
            <div class="calculator">
                <h2>Paint Calculator</h2>
                <div class="input-group">
                    <label for="paintArea">Wall Area (m²)</label>
                    <input type="number" id="paintArea">
                </div>
                <div class="input-group">
                    <label for="coats">Number of Coats</label>
                    <input type="number" id="coats" value="2">
                </div>
                <button class="btn" onclick="calculatePaint()">Calculate</button>
                <div class="result" id="paintResult"></div>
            </div>

            <!-- Concrete Volume Calculator -->
            <div class="calculator">
                <h2>Concrete Volume</h2>
                <div class="input-group">
                    <label for="concreteLength">Length (m)</label>
                    <input type="number" id="concreteLength">
                </div>
                <div class="input-group">
                    <label for="concreteWidth">Width (m)</label>
                    <input type="number" id="concreteWidth">
                </div>
                <div class="input-group">
                    <label for="concreteDepth">Depth (mm)</label>
                    <input type="number" id="concreteDepth">
                </div>
                <button class="btn" onclick="calculateConcrete()">Calculate</button>
                <div class="result" id="concreteResult"></div>
            </div>

            <!-- Beam Span Calculator -->
            <div class="calculator">
                <h2>Beam Span Calculator</h2>
                <div class="input-group">
                    <label for="beamSpan">Span (m)</label>
                    <input type="number" id="beamSpan">
                </div>
                <div class="input-group">
                    <label for="beamLoad">Load (kN/m)</label>
                    <input type="number" id="beamLoad">
                </div>
                <button class="btn" onclick="calculateBeam()">Calculate</button>
                <div class="result" id="beamResult"></div>
            </div>
            
            <!-- Roofing Calculator -->
            <div class="calculator">
                <h2>Roofing Calculator</h2>
                <div class="input-group">
                    <label for="roofArea">Roof Area (m²)</label>
                    <input type="number" id="roofArea">
                </div>
                <div class="input-group">
                    <label for="tileCoverage">Tile Coverage (tiles/m²)</label>
                    <input type="number" id="tileCoverage" value="10">
                </div>
                <button class="btn" onclick="calculateRoof()">Calculate</button>
                <div class="result" id="roofResult"></div>
            </div>
            
            <!-- Plasterboard Calculator -->
            <div class="calculator">
                <h2>Plasterboard Calculator</h2>
                <div class="input-group">
                    <label for="plasterArea">Ceiling/Wall Area (m²)</label>
                    <input type="number" id="plasterArea">
                </div>
                <div class="input-group">
                    <label for="boardSize">Board Size (m²)</label>
                    <input type="number" id="boardSize" value="2.88">
                </div>
                <button class="btn" onclick="calculatePlasterboard()">Calculate</button>
                <div class="result" id="plasterResult"></div>
            </div>
            
            <!-- Skip Hire Calculator -->
            <div class="calculator">
                <h2>Skip Hire Estimator</h2>
                <div class="input-group">
                    <label for="wasteVolume">Waste Volume (m³)</label>
                    <input type="number" id="wasteVolume">
                </div>
                <button class="btn" onclick="calculateSkip()">Calculate</button>
                <div class="result" id="skipResult"></div>
            </div>
            
            <!-- Insulation Calculator -->
            <div class="calculator">
                <h2>Insulation Calculator</h2>
                <div class="input-group">
                    <label for="insulationArea">Wall Area (m²)</label>
                    <input type="number" id="insulationArea">
                </div>
                <div class="input-group">
                    <label for="rollCoverage">Roll Coverage (m²)</label>
                    <input type="number" id="rollCoverage" value="10">
                </div>
                <button class="btn" onclick="calculateInsulation()">Calculate</button>
                <div class="result" id="insulationResult"></div>
            </div>
            
            <!-- Ventilation Calculator -->
            <div class="calculator">
                <h2>Ventilation Calculator</h2>
                <div class="input-group">
                    <label for="roomVolume">Room Volume (m³)</label>
                    <input type="number" id="roomVolume">
                </div>
                <div class="input-group">
                    <label for="occupants">Occupants</label>
                    <input type="number" id="occupantsVent">
                </div>
                <button class="btn" onclick="calculateVentilation()">Calculate</button>
                <div class="result" id="ventilationResult"></div>
            </div>

            <!-- Temporary Works Cost Estimator -->
            <div class="calculator">
                <h2>Temporary Works Cost Estimator</h2>
                <div class="input-group">
                    <label for="scaffoldLength">Scaffolding Length (linear m)</label>
                    <input type="number" id="scaffoldLength">
                </div>
                <div class="input-group">
                    <label for="heightZones">Height Zones</label>
                    <input type="number" id="heightZones" value="1">
                </div>
                <div class="input-group">
                    <label for="hoardingLength">Hoarding Length (m)</label>
                    <input type="number" id="hoardingLength">
                </div>
                <div class="input-group">
                    <label for="hoardingMaterial">Material Type</label>
                    <select id="hoardingMaterial">
                        <option value="timber">Timber</option>
                        <option value="steel">Steel</option>
                    </select>
                </div>
                <div class="input-group">
                    <label><input type="checkbox" id="cdmCompliance"> CDM 2015 Compliance</label>
                </div>
                <button class="btn" onclick="calculateTempWorks()">Calculate</button>
                <div class="result" id="tempWorksResult"></div>
            </div>
            
            <!-- Preliminaries Calculator -->
            <div class="calculator">
                <h2>Preliminaries Calculator</h2>
                <div class="input-group">
                    <label for="portacabins">Number of Portacabins</label>
                    <input type="number" id="portacabins">
                </div>
                <div class="input-group">
                    <label for="craneWeeks">Crane Hire Weeks</label>
                    <input type="number" id="craneWeeks">
                </div>
                <div class="input-group">
                    <label for="siteArea">Site Area (hectares)</label>
                    <input type="number" id="siteArea">
                </div>
                <button class="btn" onclick="calculatePreliminaries()">Calculate</button>
                <div class="result" id="prelimResult"></div>
            </div>
            
            <!-- Earthworks Optimiser -->
            <div class="calculator">
                <h2>Earthworks Cut/Fill Optimiser</h2>
                <div class="input-group">
                    <label for="cutVolume">Cut Volume (m³)</label>
                    <input type="number" id="cutVolume">
                </div>
                <div class="input-group">
                    <label for="fillVolume">Fill Volume (m³)</label>
                    <input type="number" id="fillVolume">
                </div>
                <div class="input-group">
                    <label for="haulDistance">Haul Distance (km)</label>
                    <input type="number" id="haulDistance">
                </div>
                <button class="btn" onclick="calculateEarthworks()">Calculate</button>
                <div class="result" id="earthworksResult"></div>
            </div>
            
            <!-- Life Cycle Costing Tool -->
            <div class="calculator">
                <h2>Life Cycle Costing Tool</h2>
                <div class="input-group">
                    <label for="initialCost">Initial Cost (£)</label>
                    <input type="number" id="initialCost">
                </div>
                <div class="input-group">
                    <label for="lifespan">Lifespan (years)</label>
                    <input type="number" id="lifespan" value="25">
                </div>
                <div class="input-group">
                    <label for="maintenance">Annual Maintenance (£)</label>
                    <input type="number" id="maintenance">
                </div>
                <button class="btn" onclick="calculateLifeCycle()">Calculate</button>
                <div class="result" id="lifecycleResult"></div>
            </div>
            
            <!-- NEC Compensation Calculator -->
            <div class="calculator">
                <h2>NEC Compensation Event Calculator</h2>
                <div class="input-group">
                    <label for="originalDuration">Original Duration (weeks)</label>
                    <input type="number" id="originalDuration">
                </div>
                <div class="input-group">
                    <label for="delayWeeks">Delay (weeks)</label>
                    <input type="number" id="delayWeeks">
                </div>
                <div class="input-group">
                    <label for="additionalCost">Additional Resources (£)</label>
                    <input type="number" id="additionalCost">
                </div>
                <button class="btn" onclick="calculateNEC()">Calculate</button>
                <div class="result" id="necResult"></div>
            </div>

            <!-- Rainwater Drainage Calculator -->
            <div class="calculator">
                <h2>Rainwater Drainage Calculator</h2>
                <div class="input-group">
                    <label for="roofAreaDrain">Roof Area (m²)</label>
                    <input type="number" id="roofAreaDrain">
                </div>
                <div class="input-group">
                    <label for="rainfall">Rainfall Intensity (mm/hr)</label>
                    <input type="number" id="rainfall" value="75">
                </div>
                <button class="btn" onclick="calculateDrainage()">Calculate</button>
                <div class="result" id="drainageResult"></div>
            </div>
            
            <!-- Part L Compliance Checker -->
            <div class="calculator">
                <h2>Part L Compliance Checker</h2>
                <div class="input-group">
                    <label for="wallUValue">Wall U-Value (W/m²K)</label>
                    <input type="number" id="wallUValue" step="0.01">
                </div>
                <div class="input-group">
                    <label for="windowUValue">Window U-Value (W/m²K)</label>
                    <input type="number" id="windowUValue" step="0.1" value="1.6">
                </div>
                <button class="btn" onclick="checkPartL()">Check Compliance</button>
                <div class="result" id="partLResult"></div>
            </div>
            
            <!-- Fire Resistance Calculator -->
            <div class="calculator">
                <h2>Fire Resistance Calculator</h2>
                <div class="input-group">
                    <label for="buildingHeight">Building Height (m)</label>
                    <input type="number" id="buildingHeight">
                </div>
                <div class="input-group">
                    <label for="buildingType">Building Type</label>
                    <select id="buildingType">
                        <option value="residential">Residential</option>
                        <option value="commercial">Commercial</option>
                    </select>
                </div>
                <button class="btn" onclick="calculateFireResistance()">Calculate</button>
                <div class="result" id="fireResult"></div>
            </div>
            
            <!-- Masonry Calculator -->
            <div class="calculator">
                <h2>Masonry Calculator</h2>
                <div class="input-group">
                    <label for="masonryLength">Wall Length (m)</label>
                    <input type="number" id="masonryLength">
                </div>
                <div class="input-group">
                    <label for="masonryHeight">Wall Height (m)</label>
                    <input type="number" id="masonryHeight">
                </div>
                <div class="input-group">
                    <label for="blockType">Block Type</label>
                    <select id="blockType">
                        <option value="7N">7N Solid</option>
                        <option value="10N">10N Hollow</option>
                    </select>
                </div>
                <button class="btn" onclick="calculateMasonry()">Calculate</button>
                <div class="result" id="masonryResult"></div>
            </div>
            
            <!-- Plant Hire Calculator -->
            <div class="calculator">
                <h2>Plant Hire Calculator</h2>
                <div class="input-group">
                    <label for="plantType">Plant Type</label>
                    <select id="plantType">
                        <option value="excavator">360° Excavator</option>
                        <option value="dumper">Dumper Truck</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="hireDays">Hire Duration (days)</label>
                    <input type="number" id="hireDays">
                </div>
                <button class="btn" onclick="calculatePlantHire()">Calculate</button>
                <div class="result" id="plantResult"></div>
            </div>

            <!-- Ladder Angle Calculator -->
            <div class="calculator">
                <h2>Ladder Angle Calculator</h2>
                <div class="input-group">
                    <label for="ladderHeight">Ladder Height (m)</label>
                    <input type="number" id="ladderHeight">
                </div>
                <div class="input-group">
                    <label for="baseDistance">Base Distance (m)</label>
                    <input type="number" id="baseDistance">
                </div>
                <button class="btn" onclick="calculateLadderAngle()">Check Safety</button>
                <div class="result" id="ladderResult"></div>
            </div>
            
            <!-- Screed Calculator -->
            <div class="calculator">
                <h2>Screed Calculator</h2>
                <div class="input-group">
                    <label for="screedArea">Floor Area (m²)</label>
                    <input type="number" id="screedArea">
                </div>
                <div class="input-group">
                    <label for="screedThickness">Thickness (mm)</label>
                    <input type="number" id="screedThickness" value="75">
                </div>
                <button class="btn" onclick="calculateScreed()">Calculate</button>
                <div class="result" id="screedResult"></div>
            </div>
            
            <!-- Site Noise Assessment -->
            <div class="calculator">
                <h2>Site Noise Assessment</h2>
                <div class="input-group">
                    <label for="noiseLevel">Noise Level (dB)</label>
                    <input type="number" id="noiseLevel">
                </div>
                <div class="input-group">
                    <label for="exposureTime">Exposure Time (hrs)</label>
                    <input type="number" id="exposureTime">
                </div>
                <button class="btn" onclick="calculateNoise()">Assess Risk</button>
                <div class="result" id="noiseResult"></div>
            </div>
            
            <!-- Construction Phase Plan Checker -->
            <div class="calculator">
                <h2>Construction Phase Plan Checker</h2>
                <div class="input-group">
                    <label><input type="checkbox" id="riskAssessment"> Risk Assessment</label>
                </div>
                <div class="input-group">
                    <label><input type="checkbox" id="methodStatement"> Method Statement</label>
                </div>
                <div class="input-group">
                    <label><input type="checkbox" id="welfare"> Welfare Facilities</label>
                </div>
                <button class="btn" onclick="checkPlan()">Verify Plan</button>
                <div class="result" id="planResult"></div>
            </div>

            <!-- NEW: Scaffolding Calculator -->
            <div class="calculator">
                <h2>Scaffolding Calculator</h2>
                <div class="input-group">
                    <label for="scaffoldRun">Length of Run (m)</label>
                    <input type="number" id="scaffoldRun">
                </div>
                <div class="input-group">
                    <label for="scaffoldLifts">Number of Lifts</label>
                    <input type="number" id="scaffoldLifts" value="1">
                </div>
                <div class="input-group">
                    <label for="boardedLifts">Boarded Lifts</label>
                    <input type="number" id="boardedLifts" value="1">
                </div>
                <button class="btn" onclick="calculateScaffolding()">Calculate Materials</button>
                <div class="result" id="scaffoldResult"></div>
            </div>

            <!-- NEW: Groundwork Volume Calculator -->
            <div class="calculator">
                <h2>Groundwork Volume Calculator</h2>
                <div class="input-group">
                    <label for="trenchLength">Trench Length (m)</label>
                    <input type="number" id="trenchLength">
                </div>
                <div class="input-group">
                    <label for="trenchWidth">Trench Width (m)</label>
                    <input type="number" id="trenchWidth">
                </div>
                <div class="input-group">
                    <label for="trenchDepth">Trench Depth (m)</label>
                    <input type="number" id="trenchDepth">
                </div>
                <button class="btn" onclick="calculateGroundwork()">Calculate Volume</button>
                <div class="result" id="groundworkResult"></div>
            </div>

            <!-- NEW: Daywork Rate Calculator -->
            <div class="calculator">
                <h2>Daywork Rate Calculator</h2>
                <div class="input-group">
                    <label for="labourCost">Labour Cost (£)</label>
                    <input type="number" id="labourCost">
                </div>
                <div class="input-group">
                    <label for="materialCost">Material Cost (£)</label>
                    <input type="number" id="materialCost">
                </div>
                <div class="input-group">
                    <label for="overheadPercentage">Overhead & Profit (%)</label>
                    <input type="number" id="overheadPercentage" value="15">
                </div>
                <button class="btn" onclick="calculateDaywork()">Calculate Total</button>
                <div class="result" id="dayworkResult"></div>
            </div>

            <!-- NEW: Profit & Loss Forecaster -->
            <div class="calculator">
                <h2>Profit & Loss Forecaster</h2>
                <div class="input-group">
                    <label for="contractValue">Contract Value (£)</label>
                    <input type="number" id="contractValue">
                </div>
                <div class="input-group">
                    <label for="estimatedCosts">Estimated Costs (£)</label>
                    <input type="number" id="estimatedCosts">
                </div>
                <div class="input-group">
                    <label for="costsToDate">Costs to Date (£)</label>
                    <input type="number" id="costsToDate">
                </div>
                <button class="btn" onclick="calculateProfitLoss()">Forecast P&L</button>
                <div class="result" id="profitLossResult"></div>
            </div>

            <!-- NEW: Final Account Statement Generator -->
            <div class="calculator">
                <h2>Final Account Statement</h2>
                <div class="input-group">
                    <label for="originalContractSum">Original Contract Sum (£)</label>
                    <input type="number" id="originalContractSum">
                </div>
                <div class="input-group">
                    <label for="netVariations">Net Variations (£)</label>
                    <input type="number" id="netVariations">
                </div>
                <div class="input-group">
                    <label for="paymentsReceived">Payments Received (£)</label>
                    <input type="number" id="paymentsReceived">
                </div>
                <button class="btn" onclick="generateFinalAccount()">Generate Statement</button>
                <div class="result" id="finalAccountResult"></div>
            </div>

        </div>
    </main>

    <script>
        // General purpose function to get numeric value from an element
        function getVal(id) {
            const value = parseFloat(document.getElementById(id).value);
            return isNaN(value) ? 0 : value;
        }

        // General purpose function to set innerHTML of an element
        function setResult(id, html) {
            document.getElementById(id).innerHTML = html;
        }

        function calculateStairs() {
            const totalHeight = getVal('totalHeight');
            const riserHeight = getVal('riserHeight');
            
            if (totalHeight === 0) {
                setResult('stairResult', 'Please enter a total height.');
                return;
            }
            if (riserHeight < 150 || riserHeight > 220) {
                setResult('stairResult', '<span style="color: #e74c3c;">Riser height should be between 150-220mm for UK regulations.</span>');
                return;
            }

            const numberOfRisers = Math.ceil(totalHeight / riserHeight);
            const actualRiserHeight = totalHeight / numberOfRisers;
            const numberOfTreads = numberOfRisers - 1;

            setResult('stairResult', 
                `Risers: ${numberOfRisers} @ ${actualRiserHeight.toFixed(1)}mm<br>
                 Treads: ${numberOfTreads} (recommended 250-300mm)`);
        }

        function calculateLoad() {
            const area = getVal('floorArea');
            const load = getVal('loadPerSqm');
            const totalLoad = (area * load).toFixed(1);
            setResult('loadResult', `Total Load: ${totalLoad} kN`);
        }

        function calculateBricks() {
            const length = getVal('wallLength');
            const height = getVal('wallHeight');
            const bricks = Math.ceil((length * height) * 60 * 1.05); // 60 bricks per m² + 5% waste
            setResult('brickResult', `Approx. ${bricks} bricks needed (incl. 5% waste)`);
        }

        function calculatePaint() {
            const area = getVal('paintArea');
            const coats = getVal('coats');
            const litres = (area * coats / 12).toFixed(1); // 12m² per litre
            setResult('paintResult', `Required: ${litres} litres`);
        }

        function calculateConcrete() {
            const length = getVal('concreteLength');
            const width = getVal('concreteWidth');
            const depth = getVal('concreteDepth') / 1000;
            const volume = (length * width * depth).toFixed(2);
            setResult('concreteResult', `Volume: ${volume} m³`);
        }

        function calculateBeam() {
            const span = getVal('beamSpan');
            const load = getVal('beamLoad');
            // Simplified formula for demonstration
            const depth = (span * 1000 / 20).toFixed(0); 
            setResult('beamResult', `Minimum depth: ~${depth}mm (consult engineer)`);
        }
        
        function calculateRoof() {
            const area = getVal('roofArea');
            const coverage = getVal('tileCoverage');
            const tiles = Math.ceil(area * coverage * 1.1); // 10% waste
            setResult('roofResult', `${tiles} tiles needed (incl. 10% waste)`);
        }
        
        function calculatePlasterboard() {
            const area = getVal('plasterArea');
            const boardSize = getVal('boardSize');
            if (boardSize === 0) {
                 setResult('plasterResult', 'Board size cannot be zero.');
                 return;
            }
            const boards = Math.ceil(area / boardSize * 1.1); // 10% waste
            setResult('plasterResult', `${boards} boards needed (standard 2.4x1.2m boards)`);
        }
        
        function calculateSkip() {
            const volume = getVal('wasteVolume');
            const sizes = {
                "2 yard": 1.5, "4 yard": 3, "6 yard": 4.5, "8 yard": 6, "12 yard": 9, "16 yard": 12
            };
            let recommended = "16 yard+";
            for(const [size, capacity] of Object.entries(sizes)) {
                if(volume <= capacity) {
                    recommended = size;
                    break;
                }
            }
            setResult('skipResult', `Recommended: ${recommended} skip`);
        }
        
        function calculateInsulation() {
            const area = getVal('insulationArea');
            const coverage = getVal('rollCoverage');
            if(coverage === 0) {
                setResult('insulationResult', 'Roll coverage cannot be zero.');
                return;
            }
            const rolls = Math.ceil(area / coverage * 1.1); // 10% waste
            setResult('insulationResult', `${rolls} rolls needed (100mm mineral wool)`);
        }
        
        function calculateVentilation() {
            const volume = getVal('roomVolume');
            const people = getVal('occupantsVent');
            const airflow = Math.max(volume * 0.5, people * 10).toFixed(1); // UK Building Regs
            setResult('ventilationResult', `Required: ${airflow} m³/hr fresh air`);
        }

        function calculateTempWorks() {
            const scaffLength = getVal('scaffoldLength');
            const zones = getVal('heightZones');
            const hoardingLength = getVal('hoardingLength');
            const material = document.getElementById('hoardingMaterial').value;
            const cdmCompliance = document.getElementById('cdmCompliance').checked;
        
            let scaffCost = scaffLength * 35 * zones;
            let hoardingCost = hoardingLength * (material === 'timber' ? 120 : 200);
            let cdmCost = cdmCompliance ? 2500 : 0;
            let total = scaffCost + hoardingCost + cdmCost;
        
            setResult('tempWorksResult', `
                Scaffolding: £${scaffCost.toLocaleString()}<br>
                Hoarding: £${hoardingCost.toLocaleString()}<br>
                CDM Compliance: £${cdmCost.toLocaleString()}<br>
                <strong>Total: £${total.toLocaleString()}</strong>
            `);
        }
        
        function calculatePreliminaries() {
            const cabins = getVal('portacabins');
            const craneWeeks = getVal('craneWeeks');
            const area = getVal('siteArea');
        
            const cabinCost = cabins * 4500;
            const craneCost = craneWeeks * (2500 + 1200); // Crane + operator
            const utilities = area * 1500;
            const total = cabinCost + craneCost + utilities;
        
            setResult('prelimResult', `
                NEC4 Breakdown:<br>
                - Site Setup: £${cabinCost.toLocaleString()}<br>
                - Plant Hire: £${craneCost.toLocaleString()}<br>
                - Utilities: £${utilities.toLocaleString()}<br>
                <strong>Total Prelims: £${total.toLocaleString()}</strong>
            `);
        }
        
        function calculateEarthworks() {
            const cut = getVal('cutVolume');
            const fill = getVal('fillVolume');
            const haul = getVal('haulDistance');
            
            const balance = cut - fill;
            const landfillTax = 126.15; // £/tonne (2024 rate)
            const haulCost = balance > 0 ? balance * haul * 3.50 : 0;
            const disposalCost = balance > 0 ? balance * 1.8 * landfillTax : 0;
            const importCost = balance < 0 ? Math.abs(balance) * 25 : 0;
        
            setResult('earthworksResult', `
                Site Balance: ${balance.toFixed(2)} m³<br>
                Haulage Cost: £${haulCost.toLocaleString()}<br>
                ${balance > 0 ? `Disposal Cost: £${disposalCost.toLocaleString()}` : `Import Cost: £${importCost.toLocaleString()}`}
            `);
        }
        
        function calculateLifeCycle() {
            const initial = getVal('initialCost');
            const years = getVal('lifespan');
            const maintenance = getVal('maintenance');
            const discountRate = 3.5; // UK public sector discount rate
        
            let npv = initial;
            for(let y = 1; y <= years; y++) {
                npv += maintenance / Math.pow(1 + discountRate/100, y);
            }
        
            setResult('lifecycleResult', `
                NPV (${years} years): £${npv.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}<br>
                Carbon Cost: ${(years * 120).toLocaleString()} kgCO₂e<br>
                (Assumes 120kg/yr carbon impact)
            `);
        }
        
        function calculateNEC() {
            const duration = getVal('originalDuration');
            const delay = getVal('delayWeeks');
            const costs = getVal('additionalCost');
        
            const timeImpact = duration > 0 && (delay / duration) > 0.15 ? "EOT Required" : "Within float";
            const costImpact = costs * 1.13; // 13% NEC fee percentage
        
            setResult('necResult', `
                Compensation Event Analysis:<br>
                Time Impact: ${timeImpact}<br>
                Cost Impact: £${costImpact.toLocaleString()}<br>
                (Includes 13% fee percentage)
            `);
        }

        function calculateDrainage() {
            const area = getVal('roofAreaDrain');
            const rainfall = getVal('rainfall');
            const flowRate = (area * rainfall) / 3600; // l/s
            const pipeSize = flowRate > 3.5 ? "110mm" : "68mm";
            setResult('drainageResult', `
                Required: ${pipeSize} downpipe<br>
                Flow rate: ${flowRate.toFixed(2)} l/s
            `);
        }
        
        function checkPartL() {
            const wallU = getVal('wallUValue');
            const windowU = getVal('windowUValue');
            const wallCompliant = wallU <= 0.26;
            const windowCompliant = windowU <= 1.6;
            
            let results = [];
            if(!wallCompliant) results.push("Wall U-value exceeds 0.26 W/m²K");
            if(!windowCompliant) results.push("Window U-value exceeds 1.6 W/m²K");
            
            const resultDiv = document.getElementById('partLResult');
            if (results.length > 0) {
                resultDiv.innerHTML = `⚠️ Non-compliant: <br>${results.join('<br>')}`;
                resultDiv.style.color = '#e74c3c';
            } else {
                resultDiv.innerHTML = "✓ Compliant with Part L 2023";
                resultDiv.style.color = '#2ecc71';
            }
        }
        
        function calculateFireResistance() {
            const height = getVal('buildingHeight');
            const type = document.getElementById('buildingType').value;
            let resistance;
            
            if(type === 'residential') {
                resistance = height > 18 ? 120 : height > 11 ? 90 : 60;
            } else {
                resistance = height > 30 ? 180 : height > 18 ? 120 : 60;
            }
            
            setResult('fireResult', `
                Required FR: ${resistance} minutes<br>
                (Approved Document B)
            `);
        }
        
        function calculateMasonry() {
            const length = getVal('masonryLength');
            const height = getVal('masonryHeight');
            const blockType = document.getElementById('blockType').value;
            const strength = blockType === '7N' ? 7 : 10;
            const capacity = (length * 0.1 * strength * 1000).toFixed(0);
            
            setResult('masonryResult', `
                Load capacity: ~${capacity} kN<br>
                (Assuming 100mm thick wall)
            `);
        }
        
        function calculatePlantHire() {
            const plant = document.getElementById('plantType').value;
            const days = getVal('hireDays');
            const rates = {
                excavator: { daily: 180, fuel: 40 },
                dumper: { daily: 75, fuel: 20 }
            };
            const total = days * (rates[plant].daily + rates[plant].fuel);
            
            setResult('plantResult', `
                Total cost: £${total.toFixed(0)}<br>
                (Incl. fuel & operator)
            `);
        }

        function calculateLadderAngle() {
            const height = getVal('ladderHeight');
            const base = getVal('baseDistance');
            const resultDiv = document.getElementById('ladderResult');

            if (height === 0) {
                resultDiv.innerHTML = 'Please enter a ladder height.';
                resultDiv.style.color = '#e74c3c';
                return;
            }
            const ratio = base / height;
            
            let message = "";
            if (ratio >= 0.24 && ratio <= 0.26) { // 1:4 ratio (75°)
                message = "✓ Ideal angle (1:4 ratio)";
                resultDiv.style.color = '#2ecc71';
            } else {
                message = `⚠️ Adjust base to ${(height/4).toFixed(2)}m (current ratio 1:${(1/ratio).toFixed(1)})`;
                resultDiv.style.color = '#e74c3c';
            }
            resultDiv.innerHTML = message;
        }
        
        function calculateScreed() {
            const area = getVal('screedArea');
            const thickness = getVal('screedThickness') / 1000;
            const volume = area * thickness;
            const bags = Math.ceil(volume / (25 / 2200)); // 2200 kg/m3 density, 25kg bags
            setResult('screedResult', `
                ${volume.toFixed(2)} m³ required<br>
                Approx. ${bags} bags (25kg each) needed
            `);
        }
        
        function calculateNoise() {
            const dB = getVal('noiseLevel');
            const hours = getVal('exposureTime');
            const resultDiv = document.getElementById('noiseResult');

            if (hours === 0) {
                resultDiv.innerHTML = 'Please enter an exposure time.';
                resultDiv.style.color = '#e74c3c';
                return;
            }

            const limit = 87 - (10 * Math.log10(hours/8)); // Relative to 8 hour exposure
            
            if(dB > limit) {
                resultDiv.innerHTML = `⚠️ Over limit for this duration (${limit.toFixed(1)} dB) - PPE required`;
                resultDiv.style.color = '#e74c3c';
            } else {
                resultDiv.innerHTML = "✓ Within safe limits";
                resultDiv.style.color = '#2ecc71';
            }
        }
        
        function checkPlan() {
            const hasRA = document.getElementById('riskAssessment').checked;
            const hasMS = document.getElementById('methodStatement').checked;
            const hasWF = document.getElementById('welfare').checked;
            const missing = [];
            
            if(!hasRA) missing.push("Risk Assessment");
            if(!hasMS) missing.push("Method Statement");
            if(!hasWF) missing.push("Welfare Facilities");
            
            const resultDiv = document.getElementById('planResult');
            if(missing.length > 0) {
                resultDiv.innerHTML = `⚠️ Missing: ${missing.join(', ')}`;
                resultDiv.style.color = '#e74c3c';
            } else {
                resultDiv.innerHTML = "✓ Compliant with CDM 2015";
                resultDiv.style.color = '#2ecc71';
            }
        }

        // NEW CALCULATOR FUNCTIONS

        function calculateScaffolding() {
            const run = getVal('scaffoldRun');
            const lifts = getVal('scaffoldLifts');
            const boardedLifts = getVal('boardedLifts');
            
            // Simplified estimation logic
            const standards = Math.ceil(run / 2) * (lifts + 1);
            const ledgers = Math.ceil(run / 2) * lifts;
            const transoms = Math.ceil(run / 1.2) * lifts;
            const boards = Math.ceil(run / 0.225) * boardedLifts;

            setResult('scaffoldResult', `
                <strong>Estimated Materials:</strong><br>
                - Standards: ${standards}<br>
                - Ledgers: ${ledgers}<br>
                - Transoms/Putlogs: ${transoms}<br>
                - Boards: ${boards}
            `);
        }

        function calculateGroundwork() {
            const length = getVal('trenchLength');
            const width = getVal('trenchWidth');
            const depth = getVal('trenchDepth');
            
            const volume = length * width * depth;
            const muckAway = volume * 1.3; // Bulking factor

            setResult('groundworkResult', `
                Excavation Volume: ${volume.toFixed(2)} m³<br>
                Muck Away Volume: ${muckAway.toFixed(2)} m³ (loose)
            `);
        }

        function calculateDaywork() {
            const labour = getVal('labourCost');
            const material = getVal('materialCost');
            const overhead = getVal('overheadPercentage');
            
            const subTotal = labour + material;
            const total = subTotal * (1 + overhead / 100);

            setResult('dayworkResult', `
                Sub-Total (Labour + Materials): £${subTotal.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}<br>
                <strong>Total with ${overhead}% O&P: £${total.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</strong>
            `);
        }

        function calculateProfitLoss() {
            const contractValue = getVal('contractValue');
            const estimatedCosts = getVal('estimatedCosts');
            const costsToDate = getVal('costsToDate');

            const originalProfit = contractValue - estimatedCosts;
            const currentProfit = contractValue - costsToDate;

            setResult('profitLossResult', `
                Original Forecast Profit: £${originalProfit.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}<br>
                Current Forecast Profit: £${currentProfit.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}
            `);
        }

        function generateFinalAccount() {
            const contractSum = getVal('originalContractSum');
            const variations = getVal('netVariations');
            const payments = getVal('paymentsReceived');

            const adjustedSum = contractSum + variations;
            const finalBalance = adjustedSum - payments;

            setResult('finalAccountResult', `
                Original Sum: £${contractSum.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}<br>
                Net Variations: £${variations.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}<br>
                <strong>Adjusted Sum: £${adjustedSum.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</strong><br>
                Payments Received: £${payments.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}<br>
                <strong>Final Balance Due: £${finalBalance.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</strong>
            `);
        }
    </script>
</body>
</html>
